{"version":3,"file":"pages/prwtokola/_id/edit.js","sources":["webpack:///./pages/prwtokola/_id/edit.vue?30e1","webpack:///./pages/prwtokola/_id/edit.vue","webpack:///./pages/prwtokola/_id/edit.vue?c30c","webpack:///./pages/prwtokola/_id/edit.vue?d01b"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs12\":\"\",\"mt-5\":\"\"}},[_c('h2',{staticClass:\"headline\"},[_vm._v(\" \"+_vm._s(_vm.main.title)+\" \")])]),_vm._v(\" \"),(_vm.loading == true)?_c('v-flex',{staticClass:\"text-xs-center mt-5\",attrs:{\"xs8\":\"\",\"sm6\":\"\",\"md2\":\"\"}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":\"45\",\"color\":\"green lighten-1\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.noElements == true)?_c('v-flex',{staticClass:\"text-xs-center text-md-left\",staticStyle:{\"margin-top\":\"130px\"},attrs:{\"xs12\":\"\",\"lg11\":\"\"}},[_c('h3',{staticClass:\"font-weight-regular\"},[_vm._v(\" \"+_vm._s(_vm.main.emptyElements)+\" \")])]):(_vm.noElements == false)?_c('v-flex',{staticStyle:{\"margin-top\":\"100px\"},attrs:{\"xs12\":\"\",\"lg10\":\"\"}},[_c('div',{staticClass:\"my-5\"},[_c('v-card',[_c('div',{staticClass:\"green lighten-4\",staticStyle:{\"width\":\"100%\",\"height\":\"8px\"}}),_vm._v(\" \"),_c('v-form',{ref:\"form\",model:{value:(_vm.validation),callback:function ($$v) {_vm.validation=$$v},expression:\"validation\"}},[_c('v-layout',{attrs:{\"wrap\":\"\",\"justify-space-between\":\"\",\"pa-4\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md5\":\"\",\"xl3\":\"\",\"my-3\":\"\"}},[_c('v-textarea',{attrs:{\"label\":\"Περιγραφή\",\"color\":\"green\",\"counter\":255,\"rules\":_vm.perigrafhRules,\"required\":\"\",\"rows\":\"5\"},model:{value:(_vm.prwtokola.perigrafh),callback:function ($$v) {_vm.$set(_vm.prwtokola, \"perigrafh\", $$v)},expression:\"prwtokola.perigrafh\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"md5\":\"\",\"xl3\":\"\",\"my-3\":\"\"}},[_c('v-textarea',{attrs:{\"label\":\"Πίνακας δεδομένων\",\"color\":\"green\",\"counter\":255,\"rules\":_vm.pinakasRules,\"rows\":\"5\"},model:{value:(_vm.prwtokola.pinakasDedomenwn),callback:function ($$v) {_vm.$set(_vm.prwtokola, \"pinakasDedomenwn\", $$v)},expression:\"prwtokola.pinakasDedomenwn\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"md12\":\"\",\"xl3\":\"\",\"my-3\":\"\"}},[_c('v-textarea',{attrs:{\"label\":\"Παράθυρο δεδομένων\",\"color\":\"green\",\"counter\":255,\"rules\":_vm.parathuroRules,\"rows\":\"5\"},model:{value:(_vm.prwtokola.parathuroDedomenwn),callback:function ($$v) {_vm.$set(_vm.prwtokola, \"parathuroDedomenwn\", $$v)},expression:\"prwtokola.parathuroDedomenwn\"}})],1),_vm._v(\" \"),_c('h3',{staticClass:\"font-weight-medium mt-2\"},[_vm._v(\"Id: \"+_vm._s(_vm.id)+\" \")]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{staticStyle:{\"text-transform\":\"none\"},attrs:{\"color\":\"light-green lighten-1\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.saveChanges()}}},[_vm._v(\"Αποθήκευση αλλαγών \"),_c('v-icon',{attrs:{\"small\":\"\",\"right\":\"\"}},[_vm._v(\"save\")])],1)],1)],1)],1)],1)]):_vm._e()],1),_vm._v(\" \"),_c('v-snackbar',{attrs:{\"timeout\":14000,\"color\":_vm.snackbarColor,\"multi-line\":true,\"auto-height\":true},model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_c('p',{staticClass:\"pt-2\"},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  head() {\r\n    return {\r\n      title: 'Πρωτόκολλο - Επεξεργασία | Φορέας Διαχείρισης Λίμνης Κερκίνης',\r\n      meta: [\r\n        {\r\n          hid: 'description', name: 'description',\r\n          content: 'Επεξεργασία συγκεκριμένου Πρωτοκόλλου για τη διαχείρηση δεδομένων των Πρωτοκόλλων για τον Φορέα Διαχείρισης Λίμνης Κερκίνης.'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      main: {\r\n        title: 'Αναζήτηση πρωτοκόλλου με id ' + this.$route.params.id,\r\n        emptyElements: 'Δεν βρέθηκε αποθηκευμένο το πρωτόκολλο που επιθυμείτε'\r\n      },\r\n      noElements: null,\r\n      prwtokola: {\r\n        id: '',\r\n        perigrafh: '',\r\n        pinakasDedomenwn: '',\r\n        parathuroDedomenwn: ''\r\n      },\r\n      returnedObject: {\r\n        id: '',\r\n        perigrafh: null,\r\n        pinakasDedomenwn: null,\r\n        parathuroDedomenwn: null,\r\n      },\r\n\r\n      validation: false,\r\n      perigrafhRules: [\r\n        v => !!v || 'Συμπληρώστε το πεδίο περιγραφή',\r\n        v => v.length <= 255 || 'Το πεδίο πρέπει να είναι λιγότερο από 255 χαρακτήρες'\r\n      ],\r\n      parathuroRules: [\r\n        v => v.length <= 255 || 'Το πεδίο πρέπει να είναι λιγότερο από 255 χαρακτήρες'\r\n      ],\r\n      pinakasRules: [\r\n        v => v.length <= 255 || 'Το πεδίο πρέπει να είναι λιγότερο από 255 χαρακτήρες'\r\n      ],\r\n\r\n      loading: null,\r\n      snackbar: false,\r\n      snackbarText: '',\r\n      snackbarColor: '',\r\n    }\r\n  },\r\n  computed: {\r\n    getByIdUrl(){\r\n      return this.$store.getters.getPrwtokolaByIdUrl\r\n    },\r\n    id(){\r\n      return this.$route.params.id\r\n    }\r\n  },\r\n  mounted() {\r\n    this.restCall(this.id)\r\n  },\r\n  methods: {\r\n    // Timeout the submit method and re-validate\r\n    submitTimeout() {\r\n      this.validation = false\r\n      setTimeout(() => {\r\n        this.validation = this.$refs.form.validate()\r\n      }, 10000);\r\n    },\r\n    checkForNulls(data){\r\n      // IMPORTANT: Using  JSON.parse to pass by value instead of pass by reference\r\n      if(data.perigrafh != null && data.pinakasDedomenwn != null && data.parathuroDedomenwn != null){\r\n        this.prwtokola = JSON.parse(JSON.stringify(data))\r\n        this.returnedObject = JSON.parse(JSON.stringify(data))\r\n      } else {\r\n        if(data.perigrafh != null ) {\r\n          this.prwtokola.perigrafh = JSON.parse(JSON.stringify(data.perigrafh))\r\n          this.returnedObject.perigrafh = JSON.parse(JSON.stringify(data.perigrafh))\r\n        }\r\n        if(data.pinakasDedomenwn != null ) {\r\n          this.prwtokola.pinakasDedomenwn = JSON.parse(JSON.stringify(data.pinakasDedomenwn))\r\n          this.returnedObject.pinakasDedomenwn = JSON.parse(JSON.stringify(data.pinakasDedomenwn))\r\n        }\r\n      \r\n        if(data.parathuroDedomenwn != null ) {\r\n          this.prwtokola.parathuroDedomenwn = JSON.parse(JSON.stringify(data.parathuroDedomenwn))\r\n          this.returnedObject.parathuroDedomenwn = JSON.parse(JSON.stringify(data.parathuroDedomenwn))\r\n        }\r\n        this.prwtokola.id = JSON.parse(JSON.stringify(data.id))\r\n        this.returnedObject.id = JSON.parse(JSON.stringify(data.id))\r\n      }\r\n    },\r\n    restCall(id) {\r\n      this.loading = true\r\n      this.$axios.get(this.getByIdUrl + id)\r\n        .then((response) => {\r\n          if( response.data == \"\" ){\r\n            this.noElements = true\r\n            this.snackbarColor = 'red'\r\n            this.snackbarText = 'Δεν βρέθηκε αποθηκευμένο το πρωτόκολλο που επιθυμείτε'\r\n            this.snackbar = true\r\n          } else {\r\n            // Check for nulls in the returned data\r\n            this.checkForNulls(response.data)\r\n            this.noElements = false\r\n          }\r\n          this.loading = false\r\n        }).catch((err) => {\r\n          this.loading = false\r\n          this.snackbarColor = 'red'\r\n          this.snackbarText = 'Υπήρξε κάποιο σφάλμα στην αναζήτηση του πρωτοκόλλου'\r\n          this.snackbar = true\r\n          throw err\r\n        })\r\n    },\r\n    // Checking if the user is submitting to send the same data\r\n    checkForSavingTheSame(){\r\n      if ((this.prwtokola.perigrafh == this.returnedObject.perigrafh || (this.prwtokola.perigrafh == '' && this.returnedObject.perigrafh == null)) \r\n        && (this.prwtokola.parathuroDedomenwn == this.returnedObject.parathuroDedomenwn || (this.prwtokola.parathuroDedomenwn == '' && this.returnedObject.parathuroDedomenwn == null))\r\n        && (this.prwtokola.pinakasDedomenwn == this.returnedObject.pinakasDedomenwn || (this.prwtokola.pinakasDedomenwn == '' && this.returnedObject.pinakasDedomenwn == null))){\r\n          return true\r\n      }\r\n    },\r\n    // Checking for the values that will be Patched after the user's changes\r\n    checkValuesOfSendingData(){\r\n      let patchedPrwtokola = {\r\n        id: this.prwtokola.id\r\n      }\r\n      // Elses not needed on the checks because sending without the attribute will generate on the back end the null value for it which will be overpassed without persisting (through my checking)\r\n      if( this.prwtokola.perigrafh == '' && this.returnedObject.perigrafh != null ) {\r\n        patchedPrwtokola.perigrafh = ''\r\n      } else if( this.prwtokola.perigrafh != '' && this.prwtokola.perigrafh != this.returnedObject.perigrafh) {\r\n        patchedPrwtokola.perigrafh = this.prwtokola.perigrafh\r\n      }\r\n\r\n      if( this.prwtokola.pinakasDedomenwn == '' && this.returnedObject.pinakasDedomenwn != null ) {\r\n        patchedPrwtokola.pinakasDedomenwn = ''\r\n      } else if (this.prwtokola.pinakasDedomenwn != '' && this.prwtokola.pinakasDedomenwn != this.returnedObject.pinakasDedomenwn) {\r\n        patchedPrwtokola.pinakasDedomenwn = this.prwtokola.pinakasDedomenwn\r\n      }\r\n      \r\n      if( this.prwtokola.parathuroDedomenwn == '' && this.returnedObject.parathuroDedomenwn != null ) {\r\n        patchedPrwtokola.parathuroDedomenwn = ''\r\n      } else if (this.prwtokola.parathuroDedomenwn != '' && this.prwtokola.parathuroDedomenwn != this.returnedObject.parathuroDedomenwn) {\r\n        patchedPrwtokola.parathuroDedomenwn = this.prwtokola.parathuroDedomenwn\r\n      }\r\n      return patchedPrwtokola\r\n    },\r\n    saveChanges(){\r\n      // Checking for the values that will be Patched after the user's changes\r\n      if ( this.checkForSavingTheSame() == true ) {\r\n        this.snackbarColor = 'red'\r\n        this.snackbarText = 'Δεν πραγματοποιήσατε καμία αλλαγή στα πεδία'\r\n        this.snackbar = true\r\n      } else {\r\n        // Checking for null - '' values and doing the request\r\n        let patchedPrwtokola = this.checkValuesOfSendingData()\r\n        this.$axios.patch(this.getByIdUrl + this.id, patchedPrwtokola)\r\n          .then(response => {\r\n            if(response.data == false) {\r\n              this.snackbarColor = 'red'\r\n              this.snackbarText = 'Οι αλλαγές δεν μπόρεσαν να αποθηκευθούν'\r\n              this.snackbar = true\r\n            } else if(response.data == true) {\r\n              this.snackbarColor = 'green'\r\n              this.snackbarText = 'Οι αλλαγές σας αποθηκεύθηκαν επιτυχώς'\r\n              this.snackbar = true\r\n              this.$router.push('/prwtokola/' + this.id)\r\n            }\r\n            // Not checking for any other value because there shouldn't exist any different case\r\n          })\r\n          .catch(err => {\r\n            this.snackbarColor = 'red'\r\n            this.snackbarText = 'Οι αλλαγές δεν μπόρεσαν να αποθηκευθούν'\r\n            this.snackbar = true\r\n            // Timeout the submit method and re-validate\r\n            this.submitTimeout()\r\n            throw err\r\n          })\r\n      }\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=15eab419&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"1da2c87a\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAFA;AAHA;AASA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AAIA;AAGA;AAIA;AACA;AACA;AACA;AAlCA;AAoCA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAPA;AACA;AAOA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxHA;AA7DA;;AC3EA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}